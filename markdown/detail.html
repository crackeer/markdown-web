<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Markdown详情</title>
    <link rel="stylesheet" href="/assets/bytemd/bytemd.css" />
    <link rel="stylesheet" href="/assets/bytemd/github-markdown.css" />
    <link rel="stylesheet" href="/assets/bytemd/highlight.css" />
    <script src="/assets/bytemd/bytemd.umd.js"></script>
    <script src="/assets/bytemd/bytemd-plugin-gfm.js"></script>
    <script src="/assets/bytemd/plugin-highlight.js"></script>
    <link rel="stylesheet" href="/assets/css/bootstrap3.4.min.css" />
    <link rel="stylesheet" href="/assets/css/my.css" />
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/util.js"></script>
    <script src="/assets/js/axios.min.js"></script>
</head>

<body>
    <ol class="breadcrumb">
        <li id="classify"><a href="/">首页</a></li>
        <li class="active" id="title"></li>
    </ol>
    <div id="markdown"></div>

    <script>
        axios.defaults.headers.common['proxy'] = "storage";
        var getMarkdown = async () => {
            let id = getQuery("id", 0)
            let result = await axios.post('/select/markdown', {
                query: {
                    id: id,
                }
            })
            if (result.data.data.length < 1) {
                return
            }
            let content = result.data.data[0].content
            let classify = '<a href="/?classify=' + result.data.data[0].classify + '">' + result.data.data[0].classify + '</a>'
            let edit = '<a href="/markdown/edit.html?id=' + result.data.data[0].id + '"><span  class="glyphicon glyphicon-pencil"></span></a>'
            $('#title').html(result.data.data[0].title)
            $('#classify').html(classify)
            $('.breadcrumb').append(edit)
            document.title = result.data.data[0].title
            new bytemd.Viewer({
                target: document.getElementById("markdown"),
                props: {
                    value: content,
                    plugins: [
                        bytemdPluginGfm(), bytemdPluginHighlight()
                    ]
                },
            });
        }
        getMarkdown()

    </script>
</body>

</html>