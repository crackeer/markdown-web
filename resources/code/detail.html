<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Code详情</title>
    <script src="https://cdn.jsdelivr.net/npm/pure-js-loader/loader.js"></script>
    <script src="/framework.js"></script>

</head>

<body></body>
<template id="template">
    <nav aria-label="breadcrumb" class="pt-3 fs-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item active" aria-current="page">
                <a :href="'/code/list.html?language=' + this.language">{{language}}</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">{{this.title}}</li>
        </ol>
        <a :href="'/code/edit.html?id=' + id" style="margin-left: 7px;">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
    </nav>
    <hr />
    <div id="container"></div>
</template>

<script>
    window.VueObject = {
        data() {
            let list = []
            return {
                id: 0,
                content: '',
                title: '',
                language: '',
            }
        },
        template: '#template',
        async mounted() {
            this.id = getQuery('id', 0)
            this.getCode();
        },
        methods: {
            async getCode() {
                let result = await axios.get('/query/code?id=' + this.id)
                if (result.data.data.length < 1) {
                    return
                }

                this.title = result.data.data[0].title
                this.language = result.data.data[0].language
                document.title = result.data.data[0].title
                setTimeout(() => {
                    initCodeEditor("container", this.language, result.data.data[0].content)
                }, 200)
            }
        }
    }

</script>

</html>